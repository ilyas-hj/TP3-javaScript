<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>TP3 - Gestion Etudiants</title>
</head>

<body>

<h2>Formulaire Etudiant</h2>

<form onsubmit="ajouterEtudiant(); return false;">

    Code étudiant : <input type="text" id="code"><br><br>
    Nom étudiant : <input type="text" id="nom"><br><br>
    Prénom étudiant : <input type="text" id="prenom"><br><br>

    Semestre :
    <select id="semestre">
        <option value="">-- Choisir --</option>
        <option value="S1">Semestre 1</option>
        <option value="S2">Semestre 2</option>
    </select>
    <br><br>

    Notes :<br>
    <input type="text" id="n1" placeholder="Module 1"><br>
    <input type="text" id="n2" placeholder="Module 2"><br>
    <input type="text" id="n3" placeholder="Module 3"><br>
    <input type="text" id="n4" placeholder="Module 4"><br>
    <input type="text" id="n5" placeholder="Module 5"><br>
    <input type="text" id="n6" placeholder="Module 6"><br><br>

    <input type="submit" value="Valider">

</form>

<h2>Liste des étudiants</h2>

<table border="1" id="tableau">
    <tr>
        <th>Code</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Semestre</th>
        <th>Moyenne</th>
        <th>Résultat</th>
    </tr>
</table>

<script>

function ajouterEtudiant()
{
    // Récupération des valeurs
    let code = document.getElementById("code").value;
    let nom = document.getElementById("nom").value;
    let prenom = document.getElementById("prenom").value;
    let semestre = document.getElementById("semestre").value;

    let n1 = document.getElementById("n1").value;
    let n2 = document.getElementById("n2").value;
    let n3 = document.getElementById("n3").value;
    let n4 = document.getElementById("n4").value;
    let n5 = document.getElementById("n5").value;
    let n6 = document.getElementById("n6").value;

    if(code=="" || nom=="" || prenom=="" || semestre=="" ||
       n1=="" || n2=="" || n3=="" || n4=="" || n5=="" || n6=="")
    {
        alert("Tous les champs sont obligatoires !");
        return;
    }

    n1 = Number(n1);
    n2 = Number(n2);
    n3 = Number(n3);
    n4 = Number(n4);
    n5 = Number(n5);
    n6 = Number(n6);

    if(isNaN(n1) || isNaN(n2) || isNaN(n3) ||
       isNaN(n4) || isNaN(n5) || isNaN(n6))
    {
        alert("Les notes doivent être des nombres !");
        return;
    }

    let moyenne = (n1+n2+n3+n4+n5+n6)/6;

    let modulesNonValides = 0;
    let noteEliminatoire = false;

    let notes = [n1,n2,n3,n4,n5,n6];

    for(let i=0; i<notes.length; i++)
    {
        if(notes[i] < 8)
        {
            noteEliminatoire = true;
        }

        if(notes[i] < 12 && notes[i] >= 8)
        {
            modulesNonValides++;
        }
    }

    let resultat = "";

    if(noteEliminatoire == true || modulesNonValides >= 3)
    {
        resultat = "Echoué";
    }
    else if(moyenne >= 12)
    {
        resultat = "Validé";
    }
    else
    {
        resultat = "Echoué";
    }

    let table = document.getElementById("tableau");

    let ligne = document.createElement("tr");

    let c1 = document.createElement("td");
    c1.innerHTML = code;

    let c2 = document.createElement("td");
    c2.innerHTML = nom;

    let c3 = document.createElement("td");
    c3.innerHTML = prenom;

    let c4 = document.createElement("td");
    c4.innerHTML = semestre;

    let c5 = document.createElement("td");
    c5.innerHTML = moyenne.toFixed(2);

    let c6 = document.createElement("td");
    c6.innerHTML = resultat;

    ligne.appendChild(c1);
    ligne.appendChild(c2);
    ligne.appendChild(c3);
    ligne.appendChild(c4);
    ligne.appendChild(c5);
    ligne.appendChild(c6);

    table.appendChild(ligne);

}

</script>

</body>
</html>
